
{% extends "base.html" %} 
{% load static from static %} 
{% load bootstrap_tags %} 
{% block content %}
<div class="container">
  <div class="row">
    <div class="col s12">
      <table>
        <thead>
          <tr>
            <th>Name</th>
            <th>Price</th>
            <th>Qty</th>

          </tr>
        </thead>
        <tbody>
          {% for item in cart_items %}
          <tr>
            <td>{{ item.product.name }}</td>
            <td>{{ item.product.price }}</td>
            <td>{{ item.quantity }}</td>

          </tr>
          {% endfor %}
        </tbody> 
      </table> 
    </div>

    <div class="row">
      <div class="col s12">
        <table>
          <thead>
            <th>Total - {{ total }}</th>
          </thead>
        </table>
      </div>
    </div>

    <div class="row">
      <div>
        <form enctype="multipart/form-data" role="form"  method="post" id="payment-form" action="{% url 'checkout' %}">
          {% csrf_token %}
          <div class="credit-card-errors" style="display:none">
            <div class="alert-message block-message error" id="stripe-error-message"></div>
          </div>

          <div class="col xl6 l6 m6 s12">
            <p style="font-weight: bold;">Pesonal Details</p>
            <div class="form-group">
              {{ order_form | as_bootstrap }}
            </div>
          </div>

          <div class="col xl6 l6 m6 s12">
            <p style="font-weight: bold;">Payment Details</p>
            <div class="form-group">
              {{ payment_form | as_bootstrap }}
            </div>  
            <div class="form-group">
              <input class="btn btn-primary" id="submit_payment_btn" name="commit" , type="submit" value="Submit Payments">
            </div>
          </div>
          <div class="col xl6 l6 m6 s12">

            <div class="form-group">

              <form action="{% url 'checkout' %}" method="post" id="payment-form">
                {% csrf_token %}
                <p style="font-weight: bold;">Payment Details</p>
                <div class="form-row">
                  <label>
                    <span><span>Name</span></span>
                    <input name="cardholder-name" class="field is-empty"/>
                  </label>
                  <label>
                    <span><span>Phone number</span></span>
                    <input class="field is-empty" type="tel"/>
                  </label>
                 
                  <label>
                    <span><span>Card Number</span></span>
                    <div id="card-number" class="field is-empty"></div>
                  </label>
                  <label>
                    <span><span>Expiry Date</span></span>
                    <div id="card-expiry" class="field is-empty"></div>
                  </label>
                  <label>
                    <span><span>CVC</span></span>
                    <div id="card-cvc" class="field is-empty"></div>
                  </label>
                  <label>
                    <span><span>Post Code</span></span>
                    <div id="card-post-code" class="field is-empty"></div>
                  </label>
                  <!-- Used to display form errors -->
                  <div id="card-errors" role="alert"></div>
                </div>

                <input class="btn btn-primary" type="submit" class="submit" value="Submit Payment">
              </form>

            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  {% block head_js %}
  <script src="https://js.stripe.com/v3/"></script>
  <script src="{% static 'js/checkout.js' %}" type="text/javascript"> </script>
  {% endblock head_js %}
  {% endblock %}

